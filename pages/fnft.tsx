import * as utils from "lib/minting-fnft-utils";
import { useCallback, useMemo, useState } from "react";
import { useCardano, utility } from "use-cardano";

import { Inter } from "@next/font/google";
import {
  applyParamsToScript,
  Data,
  Lucid,
  MintingPolicy,
  PolicyId,
  TxHash,
  Unit,
  utf8ToHex,
  Constr,
} from "lucid-cardano";

const inter = Inter({ subsets: ["latin"] });

export default function Mint() {
  const { lucid, account, showToaster, hideToaster } = useCardano();

  const [name, setName] = useState("");
  const [fnftAmount, setFnftAmount] = useState(0);

  const mintFNFT = useCallback(async () => {
    try {
      if (!lucid || !account?.address || !name) return;

      let fnftJson = {
        type: "PlutusScriptV2",
        description: "",
        cborHex:
          "5911f95911f6010000323322332232323232323322323232323232323232323232323232323232323232323232323232232323232323223232232325335323232323232323232325333500515335333573466e214009200003d03c13253355335333573466e1c004cdc0a40006a01644444400807c07a207c266ae7124012a5b506c75747573204572726f725d3a204672616374696f6e20746f6b656e73206e6f74206275726e65640003d15335333573466e1cccc0a4d4d401488008888888888888020d402c8888880180a9200103e03d103e1335738921295b506c75747573204572726f725d3a2056616c696469747920746f6b656e206e6f74206275726e65640003d103d5002103c215335533533300a03d3302b50045002001103e13357389211b5b506c75747573204572726f725d3a2077726f6e6720646174756d0003d15335533533300903d5002001103e1335738921205b506c75747573204572726f725d3a2077726f6e6720464e46542076616c75650003d15335533530085002103e13357389211f5b506c75747573204572726f725d3a2077726f6e67204e46542076616c75650003d1533530075002103e13357389212c5b506c75747573204572726f725d3a2077726f6e672076616c69646174696f6e20746f6b656e2076616c75650003d103d103d103d2153355335333573466e20d402c8888880040040f40f840f84cd5ce24812c5b506c75747573204572726f725d3a204e6f7420656e6f7567687420464e465420746f2077697468647261770003d15335533533300a03e3302b50045002001103e133573892011b5b506c75747573204572726f725d3a2077726f6e6720646174756d0003d15335533533300903e5002001103e1335738921205b506c75747573204572726f725d3a2077726f6e6720464e46542076616c75650003d15335533530085002103e13357389211f5b506c75747573204572726f725d3a2077726f6e67204e46542076616c75650003d1533530075002103e13357389212c5b506c75747573204572726f725d3a2077726f6e672076616c69646174696f6e20746f6b656e2076616c75650003d103d103d103d103d1533553353500322350022222222222223333500d25041250412504123335530431200150402350012253355335333573466e3cd400888008d4010880081381344ccd5cd19b873500222001350042200104e04d104d1350450031504400d2135001223500122223500a2235002222222222222333553045120012235002222253353501822350062232335005233500425335333573466e3c0080041781745400c417481748cd4010817494cd4ccd5cd19b8f00200105e05d15003105d153350032153350022133500223350022335002233500223305a00200120602335002206023305a00200122206022233500420602225335333573466e1c01800c18c18854cd4ccd5cd19b870050020630621333573466e1c01000418c18841884188416c54cd40048416c416c4cd41500180144015413c0284c98c80b0cd5ce2481024c660002e135017491035054380022100213330263550012222222222220083500822222200635008222222005135001220023333573466e1cd55cea80424000466442466002006004646464646464646464646464646666ae68cdc39aab9d500c480008cccccccccccc88888888888848cccccccccccc00403403002c02802402001c01801401000c008cd4090094d5d0a80619a8120129aba1500b33502402635742a014666aa050eb9409cd5d0a804999aa8143ae502735742a01066a04805a6ae85401cccd540a00b9d69aba150063232323333573466e1cd55cea801240004664424660020060046464646666ae68cdc39aab9d5002480008cc8848cc00400c008cd40e1d69aba150023039357426ae8940088c98c8100cd5ce01d02101f09aab9e5001137540026ae854008c8c8c8cccd5cd19b8735573aa004900011991091980080180119a81c3ad35742a00460726ae84d5d1280111931902019ab9c03a04203e135573ca00226ea8004d5d09aba2500223263203c33573806c07c07426aae7940044dd50009aba1500533502475c6ae854010ccd540a00a88004d5d0a801999aa8143ae200135742a00460586ae84d5d1280111931901c19ab9c03203a036135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d55cf280089baa00135742a01060386ae84d5d1280411931901519ab9c02402c0283333573466e1d4025200423212223002004375a6ae84d55cf280591999ab9a3370ea01490011091100191999ab9a3370ea0169000119091118008021bad357426aae7940348c98c80accd5ce0128168148140139299a999aa981809000a8169299a9a800911299a9981a8019a8049111110030a99a9981a8010140999ab9a3370e002900101e01d881d881d89a8180008a81798191a80091110019081c881b9299a999aa981789000a8161299a9a800911299a9981a0019a8041111110018a99a9981a0011a8041111110010999ab9a3370e002900101d81d081d081d09a8178008a81718189a80091110019081c081b111299a999aa981809000a8169299a9a800911299a9981a8019a8049111110030a99a9981a8011a8049111110028999ab9a3370e002a66a00e266e04d40248888880040144cdc01a80491111100080281e01d881d881d89a8180008a81798191a80111110019081c881b911299a801109a800911111299aa99aa99a999ab9a3371e00c6a01644444400c07c07a2666ae68cdc78029a80591111100281f01e881e881f099ab9c4912a5b506c75747573204572726f725d3a20646174756d206672616374696f6e414320696e636f72726563740003d153355335333573466e1c010d402c8888880100f80f440f84cd5ce2492a5b506c75747573204572726f725d3a20656d69747465644672616374696f6e7320696e636f72726563740003d153355335333573466e1c0054cd40284cdc09a805911111000804099b803500b22222200100803e03d103e133573892012b5b506c75747573204572726f725d3a2072656d61696e65644672616374696f6e7320696e636f72726563740003d153355335333573466e3c00cd402c88888800c0f80f44ccd5cd19b8f0023500b22222200203e03d103d103e13357389211f5b506c75747573204572726f725d3a206e6674414320696e636f72726563740003d103d103d103d13263202733573892012e5b506c75747573204572726f725d3a206f757470757420646174756d206d757374206e6f7420626520656d707479000293333573466e1cd55cea80624000466666604e6eb8d5d0a8061bae35742a0166eb4d5d0a8051bae35742a0126eb8d5d0a8041bad357426ae8940208c98c8090cd5ce00f013011081289a8072490350543500135573ca00226ea80044d55cea80089baa001135744a00226ae8940044d5d1280089aba25001135573ca00226ea800448c98c8058cd5ce00080c0919118011bac001320013550262233335573e0024a04c466a04a60086ae84008c00cd5d100100c919191999ab9a3370e6aae7540092000233221233001003002300a35742a004600a6ae84d5d1280111931900b99ab9c011019015135573ca00226ea80048c8c8c8c8cccd5cd19b8735573aa00890001199991110919998008028020018011919191999ab9a3370e6aae7540092000233221233001003002301335742a00466a01a0246ae84d5d1280111931900e19ab9c01601e01a135573ca00226ea8004d5d0a802199aa8043ae500735742a0066464646666ae68cdc3a800a4008464244460040086ae84d55cf280191999ab9a3370ea0049001119091118008021bae357426aae7940108cccd5cd19b875003480008488800c8c98c8078cd5ce00c01000e00d80d09aab9d5001137540026ae854008cd4025d71aba135744a004464c6403066ae700480680584d5d1280089aba25001135573ca00226ea80044cd54005d73ad112232230023756002640026aa04644646666aae7c008940908cd408ccc8848cc00400c008c018d55cea80118029aab9e500230043574400602e26ae84004488c8c8cccd5cd19b875001480008d406cc014d5d09aab9e500323333573466e1d400920022501b23263201533573801e02e02602426aae7540044dd5000919191999ab9a3370ea002900311909111180200298039aba135573ca00646666ae68cdc3a8012400846424444600400a60126ae84d55cf280211999ab9a3370ea006900111909111180080298039aba135573ca00a46666ae68cdc3a8022400046424444600600a6eb8d5d09aab9e500623263201533573801e02e02602402202026aae7540044dd5000919191999ab9a3370e6aae7540092000233221233001003002300535742a0046eb4d5d09aba2500223263201133573801602601e26aae7940044dd50009191999ab9a3370e6aae75400520002375c6ae84d55cf280111931900799ab9c00901100d13754002464646464646666ae68cdc3a800a401842444444400646666ae68cdc3a8012401442444444400846666ae68cdc3a801a40104664424444444660020120106eb8d5d0a8029bad357426ae8940148cccd5cd19b875004480188cc8848888888cc008024020dd71aba15007375c6ae84d5d1280391999ab9a3370ea00a900211991091111111980300480418061aba15009375c6ae84d5d1280491999ab9a3370ea00c900111909111111180380418069aba135573ca01646666ae68cdc3a803a400046424444444600a010601c6ae84d55cf280611931900c19ab9c01201a016015014013012011010135573aa00826aae79400c4d55cf280109aab9e5001137540024646464646666ae68cdc3a800a4004466644424466600200a0080066eb4d5d0a8021bad35742a0066eb4d5d09aba2500323333573466e1d4009200023212230020033008357426aae7940188c98c8044cd5ce00580980780709aab9d5003135744a00226aae7940044dd5000919191999ab9a3370ea002900111909118008019bae357426aae79400c8cccd5cd19b875002480008c8488c00800cdd71aba135573ca008464c6401c66ae7002004003002c4d55cea80089baa00112232323333573466e1d400520042122200123333573466e1d40092002232122230030043006357426aae7940108cccd5cd19b87500348000848880088c98c803ccd5ce00480880680600589aab9d5001137540024646666ae68cdc3a800a4004403446666ae68cdc3a801240004034464c6401666ae700140340240204d55ce9baa0014910350543100222323230010053200135501a223350014800088d4008894cd4ccd5cd19b8f00200901f01e130070011300600332001355019223350014800088d4008894cd4ccd5cd19b8f00200701e01d10011300600348810d464e46545f56414c49444954590022350012222533350021500f2130080012321533535008222222222222300d00221300a001150113200135501b2253350011501222135002225335333573466e3c00801c08007c4d405c0044c01800c8c8c8c8c8c8c8c8ccccccd5d200411999ab9a3370e6aae7540212000233335573ea0104a02646666aae7d4020940508cccd55cfa8041280a91999aab9f500825016233335573ea0104a02e46666aae7d4020940608cccd55cf9aba2500925335301435742a01e42a66a602a6ae85403c854cd4c054d5d0a80790a99a980b9aba1500f215335301835742a01e42a66a60306ae85403c84d4080cccccc07001801401000c0080045407854074540705406c54068540649406405004c04804404003c03894048028940449404494044940440304d5d1280089aba25001135744a00226ae8940044d5d1280089aab9e5001137540029311999999aba4001250082500825008235009375a0044a01000646666666ae900049401c9401c9401c9401c8d4020dd70010010900091111109199999800803803002802001801190009aa8069108911299a800880111099802801199aa980389000802802000899091980091299a80110801880080128008909118010018891000990009aa8049108911299a80089a80191000910999a802910011802001199aa98038900080280200091199ab9a3371e004002012010466004a00a002640026aa00c444a66a00220044426a004446600e66601000400c002006640026aa00a4444a66a00220044426a00444a66a666ae68cdc3800a4000018016266601000e00c006266601000e66a0122466600201000600400c006224400424424466002008006244004244002224646002002446600660040040021",
      };

      const fnftAddress = await lucid.utils.validatorToAddress({
        type: "PlutusV2",
        script: fnftJson.cborHex,
      });

      const fnftHash = await lucid.utils.validatorToScriptHash({
        type: "PlutusV2",
        script: fnftJson.cborHex,
      });

      // Type definition could be auto generated from on-chain script
      const Params = Data.Tuple([Data.String]);
      type Params = Data.Static<typeof Params>;

      const utxos = await lucid.utxosAt(account.address);
      console.log(utxos);
      const utxo = utxos[1];
      const mintingPolicy: MintingPolicy = {
        type: "PlutusV2",
        script: applyParamsToScript<Params>(
          "59132159131e0100003233223232323232332232323232323232323232323322323232323232323232323232323232323232323232323232323232323232323222323232232325335323232323232323232323232533500b1330413303f491345b506c75747573204572726f725d3a204275726e656420616d6f756e74206672616374696f6e73206e6f74206e656761746976650032333573466e2000520000440435001330413303f4912e5b506c75747573204572726f725d3a204469646e2774206275726e206f6e652076616c696469747920746f6b656e003303e33031025500248004cc104cc0fd24012a5b506c75747573204572726f725d3a204672616374696f6e20746f6b656e73206e6f74206275726e6564003303e32323335002220013501735002220020015002321233001002223370200400266a0804466e0000800520003235001222222004304550033303f49014a5b506c75747573204572726f725d3a204469646e2774206275726e2065786163746c79206672616374696f6e20746f6b656e7320616e64206f6e652076616c696469747920746f6b656e003303e335502c303412001500248010884c8c8c94cd54cd4ccd5cd19b8950014800011c12041204cd5ce249355b506c75747573204572726f725d3a204d696e74656420616d6d6f756e74206672616374696f6e73206e6f7420706f7369746976650004715335533535500e222222222222333553045120013233504b2233350032200200200135027001335051225335002105610010532325335333573466e3cd400488008d4044880081581544ccd5cd19b87350012200135011220010560551055350012200200c10481335738921345b506c75747573204572726f725d3a205554784f207573656420666f7220746f6b656e206e616d652069736e2774207370656e740004715335533553353302b500e533533355303912001503825335533533040350012222004330413042012504f1533533355303a120015039253353500122253353304700350111330470025007104c1350510011505030343500122220032104a104810481350500011504f500d2100113263204d3357389212f5b506c75747573204572726f725d3a2063616e6e6f742066696e642074686520617373657420696e206f75747075740004d2135001222222533553353232350022235003225335333573466e3c0100081541504cc13c00c0044150cd540fd40514028cd540f8018014413c4cd5ce24812a5b506c75747573204572726f725d3a20646174756d206672616374696f6e414320696e636f72726563740004e153355335333573466e1c011402013c138413c4cd5ce2492a5b506c75747573204572726f725d3a20656d69747465644672616374696f6e7320696e636f72726563740004e15335333573466e1c005402013c138413c4cd5ce2492b5b506c75747573204572726f725d3a2072656d61696e65644672616374696f6e7320696e636f72726563740004e104e104e13263204d33573892012e5b506c75747573204572726f725d3a206f757470757420646174756d206d757374206e6f7420626520656d7074790004d1048133573892012e5b506c75747573204572726f725d3a2053637269707420646174756d20696e636f72726563746c79206275696c7400047153355335333573466e1ccd540c4c0e448005402d2004048047104813357389214a5b506c75747573204572726f725d3a204469646e2774206d696e742065786163746c79206672616374696f6e20746f6b656e7320616e64206f6e652076616c696469747920746f6b656e00047153355335333573466e1ccc0d80a9402d2002048047104813357389212a5b506c75747573204572726f725d3a204469646e2774206d696e742076616c696469747920746f6b656e0004715335533533355303912001503825335533533040350012222004330413042012504f1533533355303a1200150392533535001222533533047003501113304700202f104c1350510011505030343500122220032104a104810481350500011504f500d2104913263204d3357389212f5b506c75747573204572726f725d3a2063616e6e6f742066696e642074686520617373657420696e206f75747075740004d1048133573892012a5b506c75747573204572726f725d3a204469646e2774206c6f636b2076616c696469747920746f6b656e00047104710471047104710471330355001500a1372466e2cd400488004d400488008cc0b40080044cc0c0cd5410c8d4004888888014c111400940044cc0ad4008c8d4004888888888888021400c4cd54104c08d4008cd541048d4004880054cd4c8c8ccd54c0cc4800540c88d400488d400488894cd4ccd54c0e84800540e48d40048894cd4ccd5cd19b8f00300d04d04c15335333573466e1c005200204d04c1350540041505315053303400321350510081504f001323500122222222222200c500350012100113504349011f5b506c75747573204572726f725d3a204e6f7420666f756e6420696e707574001302600613500522002133027500135500322222222222200813023003135500122222222222200a135001220023333573466e1cd55cea80224000466442466002006004646464646464646464646464646666ae68cdc39aab9d500c480008cccccccccccc88888888888848cccccccccccc00403403002c02802402001c01801401000c008cd406c070d5d0a80619a80d80e1aba1500b33501b01d35742a014666aa03eeb94078d5d0a804999aa80fbae501e35742a01066a0360486ae85401cccd5407c095d69aba150063232323333573466e1cd55cea801240004664424660020060046464646666ae68cdc39aab9d5002480008cc8848cc00400c008cd40bdd69aba150023030357426ae8940088c98c8154cd5ce01882a82989aab9e5001137540026ae854008c8c8c8cccd5cd19b8735573aa004900011991091980080180119a817bad35742a00460606ae84d5d1280111931902a99ab9c031055053135573ca00226ea8004d5d09aba2500223263205133573805a0a209e26aae7940044dd50009aba1500533501b75c6ae854010ccd5407c0848004d5d0a801999aa80fbae200135742a00460466ae84d5d1280111931902699ab9c02904d04b135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d55cf280089baa00135742a00860266ae84d5d1280211931901f99ab9c01b03f03d3333573466e1d40152002212200223333573466e1d401920002332212233001004003375c6ae854020dd69aba135744a010464c6407e66ae7006c0fc0f40f0dd7004081e09a81d2490350543500135573ca00226ea80044d55cea80109aab9e500113754002246a002440022464460046eb0004c8004d540d888cccd55cf80092812119a81198021aba100230033574400406a464646666ae68cdc39aab9d5002480008cc8848cc00400c008c028d5d0a80118029aba135744a004464c6406a66ae700440d40cc4d55cf280089baa0012323232323333573466e1cd55cea8022400046666444424666600200a0080060046464646666ae68cdc39aab9d5002480008cc0b4c04cd5d0a80119a8068091aba135744a004464c6407466ae700580e80e04d55cf280089baa00135742a008666aa010eb9401cd5d0a8019919191999ab9a3370ea0029002119091118010021aba135573ca00646666ae68cdc3a80124004464244460020086eb8d5d09aab9e500423333573466e1d400d20002122200323263203c33573803007807407207026aae7540044dd50009aba1500233500975c6ae84d5d1280111931901b19ab9c012036034135744a00226ae8940044d55cf280089baa0011335500175ceb44488c88c008dd5800990009aa81991191999aab9f002250222335021335501e300635573aa004600a6aae794008c010d5d100181989aba100112232323333573466e1d400520002350343005357426aae79400c8cccd5cd19b87500248008940d08c98c80cccd5ce00781981881809aab9d500113754002464646666ae68cdc3a800a400c46424444600800a600e6ae84d55cf280191999ab9a3370ea004900211909111180100298049aba135573ca00846666ae68cdc3a801a400446424444600200a600e6ae84d55cf280291999ab9a3370ea00890001190911118018029bae357426aae7940188c98c80cccd5ce00781981881801781709aab9d500113754002464646666ae68cdc39aab9d5002480008cc048c014d5d0a8011bad357426ae8940088c98c80bccd5ce00581781689aab9e5001137540024646666ae68cdc39aab9d5001480008dd71aba135573ca004464c6405a66ae700240b40ac4dd5000919191919191999ab9a3370ea002900610911111100191999ab9a3370ea004900510911111100211999ab9a3370ea00690041199109111111198008048041bae35742a00a6eb4d5d09aba2500523333573466e1d40112006233221222222233002009008375c6ae85401cdd71aba135744a00e46666ae68cdc3a802a400846644244444446600c01201060186ae854024dd71aba135744a01246666ae68cdc3a8032400446424444444600e010601a6ae84d55cf280591999ab9a3370ea00e900011909111111180280418071aba135573ca018464c6406c66ae700480d80d00cc0c80c40c00bc0b84d55cea80209aab9e5003135573ca00426aae7940044dd50009191919191999ab9a3370ea002900111999110911998008028020019bad35742a0086eb4d5d0a8019bad357426ae89400c8cccd5cd19b875002480008c8488c00800cc020d5d09aab9e500623263202f33573801605e05a05826aae75400c4d5d1280089aab9e500113754002464646666ae68cdc3a800a40044603e6eb8d5d09aab9e500323333573466e1d400920002321223002003375c6ae84d55cf280211931901619ab9c00802c02a029135573aa00226ea8004488c8c8cccd5cd19b87500148010848880048cccd5cd19b875002480088c84888c00c010c018d5d09aab9e500423333573466e1d400d20002122200223263202d33573801205a05605405226aae7540044dd50009191999ab9a3370ea0029001101191999ab9a3370ea0049000101191931901499ab9c005029027026135573a6ea8005241035054310048810d464e46545f56414c4944495459002235001222253335002150292130080012321533535008222222222222300d00221300a0011502b3200135502c2253350011502c22135002225335333573466e3c00801c0a80a44d40c40044c01800c8c8c8c8c8c8c8c8ccccccd5d200411999ab9a3370e6aae7540212000233335573ea0104a05a46666aae7d4020940b88cccd55cfa8041281791999aab9f500825030233335573ea0104a06246666aae7d4020940c88cccd55cf9aba2500925335301335742a01e42a66a60286ae85403c854cd4c050d5d0a80790a99a980b1aba1500f215335301735742a01e42a66a602e6ae85403c84d40e848cccccc00401c01801401000c008540e0540dc540d8540d4540d0540cc940cc0c40c00bc0b80b40b00ac940b00a4940ac940ac940ac940ac0a44d5d1280089aba25001135744a00226ae8940044d5d1280089aab9e50011375400246666666ae900049408c9408c9408c8d4090dd68011281181091999999aba400125022250222502225022235023375c00404046a002446666a002464c6404466ae712401024c680002220012326320223357389201024c68000222326320223357389201024c68000222212330010030021122333355002323350102233350110030010023500e00133500f22230033002001200122337000029001000a4000446644664002640026aa04444a66a0022006442646a006444a66a666ae68cdc780180601101089980519aa808801000802080218020009802801a80528059198012804800990009aa80e111299a80088011109a8011119803999804001003000801990009aa80d9111299a80088011109a80111299a999ab9a3370e002900000d80d0999804003803001899980400399a806891998008040018010030019119a999aa980289000a80211a80091299a999ab9a3371e00400a02e02c26a03c0062a03a00246a00244002900008910919800801801099a80311299a801108018800a80b190009aa80b9108911299a80089a804001910999a8058029802001199aa980389000802802000889100109109119800802001891a80091000891a800910010910919800801801111a801111a801911919a802919a8021299a999ab9a3371e0040020240222a00620224022466a00840224a66a666ae68cdc78010008090088a80188088a99a80190a99a8011099a801119a801119a801119a801119807801000900a119a801100a11980780100091100a11119a802100a111299a999ab9a3370e00c00602e02c2a66a666ae68cdc380280100b80b099809002000880b080b08078a99a8009080788079109198008018011091180080191199ab9a3371e00400201000e44666ae68cdc380100080380311299a8008803099ab9c002005122123300100300222533500210011003122002122001112230020012533500121001135002491235b506c75747573204572726f725d3a2043616e206e6f7420706172736520646174756d00123263200333573800200693090008909118010018891000889191800800911980198010010009",
          [fnftHash],
          Params
        ),
      };

      const redeemerMintFNFT = Data.to(
        new Constr(0, [utxo.txHash, BigInt(utxo.outputIndex)])
      );

      console.log(redeemerMintFNFT);

      const fromHex = (hex: string) => Buffer.from(hex, "hex");
      const toHex = (bytes: number[]) => Buffer.from(bytes).toString("hex");
      const { createHash } = require("crypto");
      const valueToHash = [utxo.outputIndex, ...fromHex(utxo.txHash)];
      const hash = await createHash("sha256")
        .update(toHex(valueToHash), "hex")
        .digest("hex");
      const tokenFNFTName = hash;

      const nftTx = await utils.mintFNFT({
        lucid,
        address: fnftAddress,
        name,
        mintingPolicy,
        redeemerMintFNFT,
        tokenFNFTName,
        utxos,
      });

      showToaster("Minted NFT", `Transaction: ${nftTx}`);
    } catch (e) {
      if (utility.isError(e)) showToaster("Could not mint NFT", e.message);
      else if (typeof e === "string") showToaster("Could not mint NFT", e);
    }
  }, [lucid, account?.address, showToaster, name]);

  const burnFNFT = useCallback(async () => {
    try {
      if (!lucid || !account?.address || !name) return;

      // const nftTx = await utils.burnNFT({
      //   lucid,
      //   address: account?.address,
      //   name,
      // });

      // showToaster("Burned NFT", `Transaction: ${nftTx}`);
    } catch (e) {
      if (utility.isError(e)) showToaster("Could not burn NFT", e.message);
      else if (typeof e === "string") showToaster("Could not burn NFT", e);
    }
  }, [lucid, account?.address, showToaster, name]);

  const canMint = useMemo(
    () => lucid && account?.address && name,
    [lucid, account?.address, name]
  );

  return (
    <div className="text-center max-w-4xl m-auto text-gray-900 dark:text-gray-100">
      <h1
        style={inter.style}
        className="mb-4 text-4xl font-extrabold tracking-tight leading-none md:text-5xl lg:text-6xl"
      >
        Fragment a NFT token
      </h1>

      <div style={inter.style} className="my-4 text-center">
        Using Lucid, we can mint a token on the Cardano blockchain.
      </div>

      <div className="text-left my-8">
        <div className="my-4">
          <label className="flex flex-col w-100">
            <span className="text-sm lowercase mb-1">NFT name</span>

            <input
              className="rounded py-1 px-2 text-gray-800 border"
              name="message"
              placeholder="My NFT name"
              value={name || ""}
              onChange={(e) => setName(e.target.value?.toString())}
            />
          </label>
        </div>

        <div className="my-4">
          <label className="flex flex-col w-40">
            <span className="text-sm lowercase mb-1">Amount of FNFT</span>

            <input
              className="rounded py-1 px-2 text-gray-800 border"
              type="number"
              min="0"
              step="1000"
              name="amount"
              value={fnftAmount}
              onChange={(e) => setFnftAmount(parseInt(e.target.value))}
            />
          </label>
        </div>

        <div className="my-4">
          <button
            disabled={!canMint}
            className="border hover:bg-blue-400 text-white my-4 w-40 py-2 cursor-pointer transition-colors disabled:cursor-not-allowed disabled:text-gray-200 rounded bg-blue-300 disabled:bg-blue-200 dark:bg-white dark:text-gray-800 dark:disabled:bg-white dark:hover:bg-white font-bold uppercase"
            onClick={() => {
              hideToaster();
              mintFNFT();
            }}
          >
            mint FNFT
          </button>

          <button
            disabled={!canMint}
            className="border ml-4 hover:bg-blue-400 text-white w-40 py-2 cursor-pointer transition-colors disabled:cursor-not-allowed disabled:text-gray-200 rounded bg-blue-300 disabled:bg-blue-200 dark:bg-white dark:text-gray-800 dark:disabled:bg-white dark:hover:bg-white font-bold uppercase"
            onClick={() => {
              hideToaster();
              burnFNFT();
            }}
          >
            burn
          </button>
        </div>
      </div>
    </div>
  );
}
